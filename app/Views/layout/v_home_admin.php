<div class="col-sm-12">
    <!-- List scroll card start -->
    <div class="card">
        <div class="card-header">
            <h5>Dashboard</h5>
        </div>
        <div class="row card-block">
            <div class="col-md-6 col-lg-4">
                <div class="card card-block user-card">
                    <div class="card-header">
                        <h5>Daftar Antrian Rawat Jalan</h5>
                        <div class="header-right">
                            <input type="text" class="form-control form-control-sm form-control-right" placeholder="Cari..">
                        </div>
                    </div>

                    <ul class="scroll-list cards ListAntriRajal">

                    </ul>

                </div>
            </div>
            <div class="col-md-6 col-lg-4">
                <div class="card card-block user-card">
                    <div class="card-header">
                        <h5>Daftar Order Kamar Inap</h5>
                        <div class="header-right">
                            <input type="text" class="form-control form-control-sm form-control-right" placeholder="Cari..">
                        </div>
                    </div>
                    <ul class="scroll-list wave">

                    </ul>
                </div>
            </div>
            <div class="col-md-6 col-lg-4">
                <div class="card card-block user-card">
                    <div class="card-header">
                        <h5>Antrian Resep Apotik</h5>
                        <div class="header-right">
                            <input type="text" class="form-control form-control-sm form-control-right" placeholder="Cari..">
                        </div>
                    </div>
                    <ul class="scroll-list flip">
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="col-md-6 col-lg-4">
                <div class="card card-block user-card">
                    <div class="card-header">
                        <h5>Antrian Permintaan Darah</h5>
                        <div class="header-right">
                            <input type="text" class="form-control form-control-sm form-control-right" placeholder="Cari..">
                        </div>
                    </div>
                    <ul class="scroll-list helix">
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="col-md-6 col-lg-4">
                <div class="card card-block user-card">
                    <div class="card-header">
                        <h5>Antrian Lab. Klinik</h5>
                        <div class="header-right">
                            <input type="text" class="form-control form-control-sm form-control-right" placeholder="Cari..">
                        </div>
                    </div>
                    <ul class="scroll-list fan">
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="col-md-6 col-lg-4">
                <div class="card card-block user-card">
                    <div class="card-header">
                        <h5>Antrian Lab. Anatomi</h5>
                        <div class="header-right">
                            <input type="text" class="form-control form-control-sm form-control-right" placeholder="Cari..">
                        </div>
                    </div>
                    <ul class="scroll-list twirl">
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="col-md-6 col-lg-4">
                <div class="card card-block user-card">
                    <div class="card-header">
                        <h5>Pasien Sedang Inap</h5>
                        <div class="header-right">
                            <input type="text" class="form-control form-control-sm form-control-right" placeholder="Cari..">
                        </div>
                    </div>
                    <ul class="scroll-list twirl">
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                        <li>
                            <h6>Item1</h6>
                        </li>
                        <li>
                            <h6>Item2</h6>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="viewmodal" style="display: none;"></div>

<script>
    function PanggilPasien(nopen) {
        Swal.fire({
            html: `<div class="alert alert-info">
            <strong>Panggilan Nomor Pendaftaran!</strong>
        </div> <h5>` + nopen + `</h5>`,
            showDenyButton: true,
            showCancelButton: true,
            confirmButtonText: `Layani`,
            denyButtonText: `Batalkan Pelayanan`,
            cancelButtonText: `Lewati Pelayanan`,
        }).then((result) => {
            /* Menerima atau pasien dilayani */
            if (result.isConfirmed) {
                $.ajax({
                    type: "post",
                    url: "<?= base_url('rekammedis/tampilModalRekamMedis'); ?>",
                    data: {
                        nopen: nopen,
                        jampel: $('#jampelayanan').val(),
                        tglpel: $('#tglPel').val(),
                        sessionUser: $('#user_session').val()
                    },
                    success: function(response) {
                        if (response) {
                            $('.viewmodal').html(response).show();
                            $('#modalrekammedis').modal('show');
                            listrawatjalan();
                        }

                    }
                });

            } else if (result.isDenied) { // membatalakan pendaftaran/kunjungan pasien
                $.ajax({
                    type: "post",
                    url: "<?= base_url('rekammedis/batalkanPendaftaran'); ?>",
                    data: {
                        nopen: nopen,
                        jampel: $('#jampelayanan').val(),
                        tglpel: $('#tglPel').val(),
                        sessionUser: $('#user_session').val()
                    },
                    // dataType: "json",
                    success: function(response) {

                        Swal.fire({
                            titel: 'Pembatalan Kunjungan!',
                            text: "Anda telah berhasil membatalkan kunjungan pasien tersebut!",
                            icon: 'success'
                        })

                        listrawatjalan();
                    }
                });

            }
        })

    }

    function listrawatjalan() {
        $.ajax({
            type: "GET",
            url: "<?= base_url('dashboard/listrawatjalan') ?>",
            dataType: "json",
            success: function(response) {
                $('.ListAntriRajal').html(response.data)
            },
            error: function(data) {
                $('.ListAntriRajal').html(data);
                console.log("error");
            }
        });
    }
    $(document).ready(function() {
        listrawatjalan();

        var auto_refresh = setInterval(
            function() {
                listrawatjalan();
            }, 1000); // refresh setiap 10000 milliseconds
    });
</script>